#!/usr/bin/env bash

workspace=$(i3-msg -t get_workspaces | grep -Po '{[^}]*"focused":true[^}]*}' | sed 's/.*"name":"\([^"]*\)".*$/\1/g')
number=$(i3-msg -t get_workspaces | grep -Po '{[^}]*"focused":true[^}]*}' | sed 's/{"num":\([^,]*\),.*$/\1/g')

new_name=$(zenity --entry --title="Rename workspace" --entry-text "$workspace")
if [[ "$new_name" != *:* ]]; then
    new_name="$number:$new_name"
fi

echo $new_name
exec i3-msg rename workspace to "$new_name"
