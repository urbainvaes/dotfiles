#!/usr/bin/env bash

inotifywait -m -q -e create $HOME/Downloads | while read line
do
    extension=${line##*.}
    file=$HOME/Downloads/$(echo "$line" | cut -d " " -f 3-)
    if [[ $extension =~ (pdf|PDF|ps|djvu) ]] ; then
        while test $(find "$file" -mmin "-0.02"); do
            sleep 0.02
        done
        zathura "$file"
    fi
done
